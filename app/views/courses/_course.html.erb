<table class="table table-stripped table-bordered table-responsive">
  <thead>
    <tr>
    <th> <%= t(:student) %> </th>
    <% course.evaluations.each do |evaluation| %>
      <th><%= evaluation.tittle %></th>
      <th></th>
    <% end %>
    </tr>
  </thead>


  

  <tbody>  
    	<% course.students.each do |student| %>
        <tr>  
          <td><%= student %></td>
            <% student.grades.joins(:evaluation).order('date asc').each do |grade| %>
              <td>
                <%= select_tag grade.grade,
                      options_for_select(
                      (-1..10).map do |each|
                        if each == -1
                          [ "Ausente", -1 ]
                        elsif grade.evaluation.min_grade >= each
                          [ "Desaprobado- #{each}", each ]
                        else
                          [ "Aprobado- #{each}", each ]
                        end
                      end, selected: grade.grade
                      ),
                      class: 'form-control col-sm-5',
                      data: {
                        url: course_evaluation_grade_path(course, grade.evaluation, grade),      
                        method:   :patch,
                        remote:   true,
                        behavior: 'updateGrade'
                      }
                %>
              </td>
              <td><%= link_to 'Edit', edit_course_evaluation_grade_path(course,grade.evaluation,grade) %></td> 
    	   <% end %>
        </tr> 
          <% end %>
      <tr>
        <% course.evaluations.each do |evaluation| %>

<td></td>
<td>
  <%= "#{t(:approved_count)}: #{evaluation.count_approved}" %>
  <br>
  <%= "#{t(:dissaprovved_count)}: #{evaluation.count_disapproved}" %>
  <br>
  <%= "#{t(:ausent_count)}: #{evaluation.count_absent}" %>
  <br>
  <%= "#{t(:approved_percentage)}: #{evaluation.percentage_approved}" %>
</td>

<% end %>
      </td>
      </tr>
  </tbody>
</table>
